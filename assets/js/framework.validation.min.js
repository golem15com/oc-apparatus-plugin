!function(e,r,a,s){"use strict";function o(){var a=this;this.errorFieldsCache={},this.$window=e(r);var s=e("[data-validation-config]");s.length&&(s=s.first());var o=this.makeConfig(s);this.config=e.extend(!0,{},t,o),this.$window.on("oc.beforeRequest",function(){a.clearValidationErrors()}),this.$window.on("ajaxError",function(e,r,s,o){o.hasOwnProperty("responseJSON")&&o.responseJSON.hasOwnProperty("X_OCTOBER_ERROR_FIELDS")&&e.preventDefault(),a.config.debug&&o.hasOwnProperty("responseJSON")&&o.responseJSON.hasOwnProperty("X_OCTOBER_ERROR_MESSAGE")&&console.log(o.responseJSON.X_OCTOBER_ERROR_MESSAGE)}),this.$window.on("ajaxInvalidField",function(e,r,s,o,t){a.handleInvalidField(r,s,o,t)})}e.apparatus||(e.apparatus={});var t={messageClass:"validation-message",debug:!0};o.prototype.makeConfig=function(e){return e.data?{messageClass:e.data("message-class")?e.data("message-class"):t.messageClass,debug:e.data("debug")}:{}},o.prototype.clearValidationErrors=function(){for(var e in this.errorFieldsCache)this.errorFieldsCache.hasOwnProperty(e)&&this.errorFieldsCache[e].empty()},o.prototype.getErrorContainer=function(r,a){return this.errorFieldsCache.hasOwnProperty(r)&&!a?this.errorFieldsCache[r]:(this.errorFieldsCache[r]=e("#"+r+"_validation"),this.errorFieldsCache[r])},o.prototype.handleInvalidField=function(e,r,a,s){var o=this.getErrorContainer(r),t=this;a.forEach(function(e){o.append('<p class="'+t.config.messageClass+'">'+e+"</p>")}),s&&e.focus()},e.apparatus.validation=new o}(jQuery,window,document);
